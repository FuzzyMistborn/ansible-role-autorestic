---
steps:
  - name: ansible-lint + yamllint
    image: fuzzymistborn/docker-linting:latest
    commands:
      - ansible-lint .
      - yamllint .

  - name: Send TG Notification
    image: appleboy/drone-telegram
    settings:
      token:
        from_secret: tg_token
      to:
        from_secret: tg_id
      format: markdown
      message: "{{#success build.status}}âœ…  Build for `{{repo.name}}` was *successful*!{{else}}âŒ  Build for `{{repo.name}}` has *FAILED*!{{/success}} \nğŸŒ  [Output]({{build.link}})\nğŸ“  Commit: {{ commit.message }}"
    when:
      event: push
      status:
        - success
        - failure

when:
  event: push